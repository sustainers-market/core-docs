asyncapi: "2.0.0-rc1"
id: core.sustainers.net
info:
  title: Core Service - Sustainer's Market
  version: "1.0.0"
  description: |
    The core functionality of the Sustainer's Market.
  contact:
    name: sustainers.org
    email: dev@sustainers.org
  license:
    name: Apache 2.0
    url: "https://www.apache.org/licenses/LICENSE-2.0"
servers:
  - url: core.sustainers.net
    description: Production server
    protocol: https

topics:
  event.{streetlightId}.lighting.measured:
    publish:
      $ref: "#/components/messages/lightMeasured"

components:
  messages:
    lightMeasured:
      summary: Inform about environmental lighting conditions for a particular streetlight.
      payload:
        $ref: "#/components/schemas/lightMeasuredPayload"

  schemas:
    lightMeasuredPayload:
      type: object
      properties:
        lumens:
          type: integer
          minimum: 0
          description: Light intensity measured in lumens.
        sentAt:
          $ref: "#/components/schemas/sentAt"
    sentAt:
      type: string
      format: date-time
      description: Date and time when the message was sent.
